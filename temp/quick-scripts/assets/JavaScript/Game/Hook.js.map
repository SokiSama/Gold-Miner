{"version":3,"sources":["Hook.js"],"names":["cc","Class","extends","Component","properties","start","init","Canvas","find","Main","getComponent","Prefab","Item","onCollisionEnter","onCollisionEnterA","other","self","HookState","isWall","Wall","PullBackHook","SetSpeed","audioEngine","play","CollisionAudio","node","y","Hook","height","x","width","parent","anchorY","MoveItemToHook","group","update","dt"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY,EAHP;;AAML;AACA;AACA;;AAEAC,SAVK,mBAUI;AACL;AACA,aAAKC,IAAL;AACH,KAbI;;AAcL;;;AAGAA,QAjBK,kBAiBC;AACF;AACA,aAAKC,MAAL,GAAcP,GAAGQ,IAAH,CAAQ,QAAR,CAAd;AACA,aAAKC,IAAL,GAAY,KAAKF,MAAL,CAAYG,YAAZ,CAAyB,MAAzB,CAAZ;AACA,aAAKC,MAAL,GAAc,KAAKF,IAAL,CAAUE,MAAxB;AACA;AACA,aAAKC,IAAL,GAAYZ,GAAGQ,IAAH,CAAQ,+BAAR,CAAZ;AACA;AACA,aAAKK,gBAAL,GAAwB,KAAKC,iBAA7B;AACH,KA1BI;;;AA4BL;;;;;AAKAA,qBAjCK,6BAiCaC,KAjCb,EAiCoBC,IAjCpB,EAiCyB;AAC1B,YAAG,KAAKP,IAAL,CAAUQ,SAAV,IAAuB,CAA1B,EAA4B;AAC5B,aAAKF,KAAL,GAAaA,KAAb;AACA,aAAKG,MAAL,GAAc,KAAKC,IAAL,CAAUJ,KAAV,CAAd;AACA;AACA,YAAG,KAAKG,MAAR,EAAe;AACX;AACA,iBAAKT,IAAL,CAAUW,YAAV;AACA;AACH;;AAED;AACA,aAAKX,IAAL,CAAUY,QAAV,CAAmBN,KAAnB;AACA;AACAf,WAAGsB,WAAH,CAAeC,IAAf,CAAoB,KAAKd,IAAL,CAAUe,cAA9B;AACA;AACA,aAAKT,KAAL,CAAWU,IAAX,CAAgBC,CAAhB,GAAoB,EAAE,KAAKjB,IAAL,CAAUkB,IAAV,CAAeC,MAAf,GAAwB,CAA1B,CAApB;AACA,aAAKb,KAAL,CAAWU,IAAX,CAAgBI,CAAhB,GAAoB,EAAE,KAAKpB,IAAL,CAAUkB,IAAV,CAAeG,KAAf,GAAuB,CAAzB,CAApB;AACAf,cAAMU,IAAN,CAAWM,MAAX,GAAoB,KAAKnB,IAAzB;AACAG,cAAMU,IAAN,CAAWO,OAAX,GAAqB,CAArB;;AAEA,aAAKvB,IAAL,CAAUW,YAAV;AACH,KAvDI;;AAwDL;;;AAGAa,kBA3DK,4BA2DW;AACZ,YAAG,KAAKf,MAAR,EAAe;AACf,aAAKH,KAAL,CAAWU,IAAX,CAAgBC,CAAhB,GAAoB,EAAE,KAAKjB,IAAL,CAAUkB,IAAV,CAAeC,MAAf,GAAwB,CAA1B,CAApB;AACA,aAAKb,KAAL,CAAWU,IAAX,CAAgBI,CAAhB,GAAoB,EAAE,KAAKpB,IAAL,CAAUkB,IAAV,CAAeG,KAAf,GAAuB,CAAzB,CAApB;AACH,KA/DI;;;AAiEL;;;AAGAX,QApEK,gBAoEAJ,KApEA,EAoEM;AACP,eAAOA,MAAMU,IAAN,CAAWS,KAAX,IAAoB,MAA3B;AACH,KAtEI;AAwELC,UAxEK,kBAwEGC,EAxEH,EAwEO;AACR,YAAG,KAAKrB,KAAL,IAAc,KAAKA,KAAL,CAAWU,IAAzB,IAAiC,KAAKhB,IAAL,CAAUQ,SAAV,IAAuB,CAA3D,EAA6D;AACzD,iBAAKgB,cAAL;AACH;AACJ;AA5EI,CAAT","file":"Hook.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\JavaScript\\Game","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n    //这个只是当前挂在了这个组件的节点初始完成执行，start 是所有节点初始完成执行\n    // onLoad () {},\n\n    start () {\n        //初始化 放到update里执行，必须等待canvas的prefab加载完事后才执行初始化\n        this.init();\n    },\n    /**\n     * @description 初始化 所有东西需要在动态资源加载完成后进行初始化\n     */\n    init(){\n        //获取Main 组件 需要先获取节点\n        this.Canvas = cc.find('Canvas');\n        this.Main = this.Canvas.getComponent('Main');\n        this.Prefab = this.Main.Prefab;\n        //获取钩子下item节点\n        this.Item = cc.find('Canvas/Header/Miner/Hook/item');\n        //监听碰撞\n        this.onCollisionEnter = this.onCollisionEnterA;\n    },\n\n    /**\n     * @description 监听碰撞\n     * @param {Object} other 其他与本节点碰撞的节点\n     * @param {Object} self 本节点\n     */\n    onCollisionEnterA(other, self){\n        if(this.Main.HookState == 2)return;\n        this.other = other;\n        this.isWall = this.Wall(other);\n        //处理钩子撞墙\n        if(this.isWall){\n            //拉回钩子\n            this.Main.PullBackHook();\n            return;\n        };\n\n        //根据物品设置拉回钩子速度\n        this.Main.SetSpeed(other);\n        //播放碰撞音效\n        cc.audioEngine.play(this.Main.CollisionAudio);\n        //将物品放置钩子上\n        this.other.node.y = -(this.Main.Hook.height + 2);\n        this.other.node.x = -(this.Main.Hook.width / 2);\n        other.node.parent = this.Item;\n        other.node.anchorY = 1;\n\n        this.Main.PullBackHook();\n    },\n    /**\n     * @description 删除被勾中的物品再创建被勾中的物品\n     */\n    MoveItemToHook(){\n        if(this.isWall)return;\n        this.other.node.y = -(this.Main.Hook.height + 2);\n        this.other.node.x = -(this.Main.Hook.width / 2);\n    },\n\n    /**\n     * @description 返回钩子是否撞墙\n     */\n    Wall(other){\n        return other.node.group == 'Wall';\n    },\n\n    update (dt) {\n        if(this.other && this.other.node && this.Main.HookState == 2){\n            this.MoveItemToHook();\n        };\n    },\n});\n"]}